!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=32)}([function(e,t,n){"use strict";t.__esModule=!0,t.extend=a,t.indexOf=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!s.test(e))return e;return e.replace(r,o)},t.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},t.createFrame=function(e){var t=a({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},r=/[&<>"'`=]/g,s=/[&<>"'`=]/;function o(e){return i[e]}function a(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var l=Object.prototype.toString;t.toString=l;var c=function(e){return"function"==typeof e};c(/x/)&&(t.isFunction=c=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)}),t.isFunction=c;var u=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===l.call(e)};t.isArray=u},function(e,t,n){"use strict";t.__esModule=!0;var i=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function r(e,t){var n=t&&t.loc,s=void 0,o=void 0,a=void 0,l=void 0;n&&(s=n.start.line,o=n.end.line,a=n.start.column,l=n.end.column,e+=" - "+s+":"+a);for(var c=Error.prototype.constructor.call(this,e),u=0;u<i.length;u++)this[i[u]]=c[i[u]];Error.captureStackTrace&&Error.captureStackTrace(this,r);try{n&&(this.lineNumber=s,this.endLineNumber=o,Object.defineProperty?(Object.defineProperty(this,"column",{value:a,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=a,this.endColumn=l))}catch(e){}}r.prototype=new Error,t.default=r,e.exports=t.default},function(e,t,n){e.exports=n(15).default},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,r){var s=e.lambda,o=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <li>"+o(s(null!=t?a(t,"value"):t,t))+" - "+o(s(null!=t?a(t,"name"):t,t))+"</li>\r\n"},3:function(e,t,n,i,r){return'    <button id="js-score-clear">Clear</button>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var s,o=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="js-sidebar" class="sidebar">\r\n    <h2 class="title">Scores</h1>\r\n    <ol class="scores">\r\n'+(null!=(s=a(n,"each").call(o,null!=t?a(t,"scores"):t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:9,column:8},end:{line:11,column:17}}}))?s:"")+"    </ol>\r\n"+(null!=(s=a(n,"if").call(o,null!=t?a(t,"scores"):t,{name:"if",hash:{},fn:e.program(3,r,0),inverse:e.noop,data:r,loc:{start:{line:13,column:4},end:{line:15,column:11}}}))?s:"")+'    <div class="grower"></div>\r\n    <ul class="help">\r\n        <li>\r\n            <span class="key">↑</span>\r\n            <span class="description">Spear</span>\r\n        </li>\r\n        <li>\r\n            <span class="key">→←</span>\r\n            <span class="description">Move</span>\r\n        </li>\r\n        <li>\r\n            <span class="key">↓</span>\r\n            <span class="description">Power-up</span>\r\n        </li>\r\n        <li>\r\n            <span class="key">n</span>\r\n            <span class="description">New game</span>\r\n        </li>\r\n        <li>\r\n            <span class="key">p</span>\r\n            <span class="description">Pause</span>\r\n        </li>\r\n    </ul>\r\n</div>'},useData:!0})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=u;var r=n(0),s=i(n(1)),o=n(5),a=n(23),l=i(n(7)),c=n(8);t.VERSION="4.7.6";t.COMPILER_REVISION=8;t.LAST_COMPATIBLE_COMPILER_REVISION=7;t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};function u(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},o.registerDefaultHelpers(this),a.registerDefaultDecorators(this)}u.prototype={constructor:u,logger:l.default,log:l.default.log,registerHelper:function(e,t){if("[object Object]"===r.toString.call(e)){if(t)throw new s.default("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("[object Object]"===r.toString.call(e))r.extend(this.partials,e);else{if(void 0===t)throw new s.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if("[object Object]"===r.toString.call(e)){if(t)throw new s.default("Arg not supported with multiple decorators");r.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){c.resetLoggedProperties()}};var d=l.default.log;t.log=d,t.createFrame=r.createFrame,t.logger=l.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){r.default(e),s.default(e),o.default(e),a.default(e),l.default(e),c.default(e),u.default(e)},t.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var r=i(n(16)),s=i(n(17)),o=i(n(18)),a=i(n(19)),l=i(n(20)),c=i(n(21)),u=i(n(22))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=i.indexOf(r.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=r.lookupLevel(e),"undefined"!=typeof console&&r.lookupLevel(r.level)<=e){var t=r.methodMap[e];console[t]||(t="log");for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];console[t].apply(console,i)}}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.createProtoAccessControl=function(e){var t=Object.create(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var n=Object.create(null);return n.__proto__=!1,{properties:{whitelist:i.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:i.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,n){return o("function"==typeof e?t.methods:t.properties,n)},t.resetLoggedProperties=function(){Object.keys(s).forEach((function(e){delete s[e]}))};var i=n(25),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7)),s=Object.create(null);function o(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==s[e]&&(s[e]=!0,r.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,i,r,s){var o,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="page">\r\n    <div class="pane">\r\n        <div class="indicators">\r\n            <div class="super-indicators" id="js-super-indicators"></div>\r\n            <div id="js-shoot-delay" class="shoot-delay-indicator"></div>\r\n        </div>\r\n        <div class="timer" id="js-timer"></div>\r\n'+(null!=(o=e.invokePartial(n(30),null!=t?a(t,"mainScene"):t,{name:"main-scene",data:s,indent:"            ",helpers:i,partials:r,decorators:e.decorators}))?o:"")+(null!=(o=e.invokePartial(n(31),t,{name:"score-popup",data:s,indent:"        ",helpers:i,partials:r,decorators:e.decorators}))?o:"")+'        <form class="popup start" id="js-start-popup">\r\n            <h1 class="title">DodgeJS</h1>\r\n            <button type="submit" id="js-start-button">Start</button>\r\n        </form>\r\n        <div class="popup pause hidden" id="js-pause-popup">\r\n            <h1 class="title">Pause</h1>\r\n            <label>Press <span class="bold">p</span> to resume</label>\r\n        </div>\r\n    </div>\r\n    <div class="pane" id="js-sidebar-wrapper">\r\n'+(null!=(o=e.invokePartial(n(3),null!=t?a(t,"sidebar"):t,{name:"sidebar",data:s,indent:"        ",helpers:i,partials:r,decorators:e.decorators}))?o:"")+"    </div>\r\n</div>"},usePartial:!0,useData:!0})},function(e,t,n){var i=n(11);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(13)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(12)(!1)).push([e.i,'html,body{height:100%;display:flex;flex-direction:row;align-items:center;justify-content:center;overflow:hidden;color:white;background-color:#0f2323}body{display:flex;flex-direction:row;align-items:center;flex-wrap:wrap}.page{display:flex;flex-direction:row;justify-content:center;position:relative}.page .pane{display:inline-block;position:relative;vertical-align:top;border-radius:2px;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2)}.page .pane:not(:last-child){margin-right:2em}.indicators{position:absolute;margin-top:10px;margin-left:10px;color:white}.indicators>*:not(:last-child){margin-bottom:10px}.indicators .shoot-delay-indicator{background-color:white;height:10px;width:0px}.indicators .super-indicator{margin-right:10px;height:30px;width:10px;background-color:white;display:inline-block}.timer{right:1em;position:absolute;color:white;font-size:20px;margin-top:10px;margin-right:10px;font-family:"VT323"}.logger{border-radius:2px;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2);background-color:#2f4f4f;width:100%;height:5em}.main-scene{background-color:#2f4f4f;height:100%;width:800px}.sidebar{display:flex;flex-direction:column;color:white;height:100%;background-color:#2f4f4f;padding:1em 2em;box-sizing:border-box}.sidebar .life-container{list-style:none;margin:0;padding:1em;width:10em}.sidebar .life-container li{display:inline-block;width:1em;height:3em;background-color:white}.sidebar .life-container li:not(:last-child){margin-right:0.2em}.popup{background-color:#2f4f4f;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex;flex-direction:column;border:1px solid white;padding:3em 5em}.popup input{margin-bottom:1em;background:none;border:none;border-bottom:1px white;color:white;text-align:center}.popup input:not(:focus){border-bottom-style:dashed}button{border:1px solid white;background:none;color:white;align-self:center;padding:0.5em 2em}.start{padding-top:0.5em}.scores{padding-inline-start:0}.grower{flex-grow:1}.sidebar .help{align-self:flex-start;list-style-type:none;padding-inline-start:0}.sidebar .help li{display:flex}.sidebar .help li .key{flex-grow:1;font-weight:bold}.sidebar .help li .description{margin-left:1em}.title{text-align:center}.hidden{display:none}.bold{font-weight:bold}\n',""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var r=(o=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),s=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[n].concat(s).concat([r]).join("\n")}var o;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var s=this[r][0];"number"==typeof s&&(i[s]=!0)}for(r=0;r<e.length;r++){var o=e[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){var i,r,s={},o=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),a=function(e,t){return t?t.querySelector(e):document.querySelector(e)},l=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var i=a.call(this,e,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}}(),c=null,u=0,d=[],h=n(14);function p(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=s[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(y(i.parts[o],t))}else{var a=[];for(o=0;o<i.parts.length;o++)a.push(y(i.parts[o],t));s[i.id]={id:i.id,refs:1,parts:a}}}}function f(e,t){for(var n=[],i={},r=0;r<e.length;r++){var s=e[r],o=t.base?s[0]+t.base:s[0],a={css:s[1],media:s[2],sourceMap:s[3]};i[o]?i[o].parts.push(a):n.push(i[o]={id:o,parts:[a]})}return n}function m(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=d[d.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=l(e.insertAt.before,n);n.insertBefore(t,r)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function v(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var i=function(){0;return n.nc}();i&&(e.attrs.nonce=i)}return w(t,e.attrs),m(e,t),t}function w(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function y(e,t){var n,i,r,s;if(t.transform&&e.css){if(!(s="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=s}if(t.singleton){var o=u++;n=c||(c=v(t)),i=k.bind(null,n,o,!1),r=k.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",w(t,e.attrs),m(e,t),t}(t),i=_.bind(null,n,t),r=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),i=P.bind(null,n),r=function(){g(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return p(n,t),function(e){for(var i=[],r=0;r<n.length;r++){var o=n[r];(a=s[o.id]).refs--,i.push(a)}e&&p(f(e,t),t);for(r=0;r<i.length;r++){var a;if(0===(a=i[r]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete s[a.id]}}}};var x,b=(x=[],function(e,t){return x[e]=t,x.filter(Boolean).join("\n")});function k(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var s=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function P(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function _(e,t,n){var i=n.css,r=n.sourceMap,s=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||s)&&(i=h(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([i],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,s=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?e:(r=0===s.indexOf("//")?s:0===s.indexOf("/")?n+s:i+s.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var s=r(n(4)),o=i(n(26)),a=i(n(1)),l=r(n(0)),c=r(n(27)),u=i(n(29));function d(){var e=new s.HandlebarsEnvironment;return l.extend(e,s),e.SafeString=o.default,e.Exception=a.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e}var h=d();h.create=d,u.default(h),h.default=h,t.default=h,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0);t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,n){var r=n.inverse,s=n.fn;if(!0===t)return s(this);if(!1===t||null==t)return r(this);if(i.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):r(this);if(n.data&&n.ids){var o=i.createFrame(n.data);o.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:o}}return s(t,n)}))},e.exports=t.default},function(e,t,n){"use strict";(function(i){t.__esModule=!0;var r,s=n(0),o=n(1),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("each",(function(e,t){if(!t)throw new a.default("Must pass iterator to #each");var n,r=t.fn,o=t.inverse,l=0,c="",u=void 0,d=void 0;function h(t,n,i){u&&(u.key=t,u.index=n,u.first=0===n,u.last=!!i,d&&(u.contextPath=d+t)),c+=r(e[t],{data:u,blockParams:s.blockParams([e[t],t],[d+t,null])})}if(t.data&&t.ids&&(d=s.appendContextPath(t.data.contextPath,t.ids[0])+"."),s.isFunction(e)&&(e=e.call(this)),t.data&&(u=s.createFrame(t.data)),e&&"object"==typeof e)if(s.isArray(e))for(var p=e.length;l<p;l++)l in e&&h(l,l,l===e.length-1);else if(i.Symbol&&e[i.Symbol.iterator]){for(var f=[],m=e[i.Symbol.iterator](),g=m.next();!g.done;g=m.next())f.push(g.value);for(p=(e=f).length;l<p;l++)h(l,l,l===e.length-1)}else n=void 0,Object.keys(e).forEach((function(e){void 0!==n&&h(n,l-1),n=e,l++})),void 0!==n&&h(n,l-1,!0);return 0===l&&(c=o(this)),c}))},e.exports=t.default}).call(this,n(6))},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(1),s=(i=r)&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new s.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(0),s=n(1),o=(i=s)&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return r.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,n){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}))},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)t.push(arguments[i]);var r=1;null!=n.hash.level?r=n.hash.level:n.data&&null!=n.data.level&&(r=n.data.level),t[0]=r,e.log.apply(e,t)}))},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t,n){return e?n.lookupProperty(e,t):e}))},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(0),s=n(1),o=(i=s)&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");r.isFunction(e)&&(e=e.call(this));var n=t.fn;if(r.isEmpty(e))return t.inverse(this);var i=t.data;return t.data&&t.ids&&((i=r.createFrame(t.data)).contextPath=r.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:i,blockParams:r.blockParams([e],[i&&i.contextPath])})}))},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){s.default(e)};var i,r=n(24),s=(i=r)&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0);t.default=function(e){e.registerDecorator("inline",(function(e,t,n,r){var s=e;return t.partials||(t.partials={},s=function(r,s){var o=n.partials;n.partials=i.extend({},o,t.partials);var a=e(r,s);return n.partials=o,a}),t.partials[r.args[0]]=r.fn,s}))},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.extend.apply(void 0,[Object.create(null)].concat(t))};var i=n(0)},function(e,t,n){"use strict";function i(e){this.string=e}t.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},t.default=i,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=a.COMPILER_REVISION;if(t>=a.LAST_COMPATIBLE_COMPILER_REVISION&&t<=a.COMPILER_REVISION)return;if(t<a.LAST_COMPATIBLE_COMPILER_REVISION){var i=a.REVISION_CHANGES[n],r=a.REVISION_CHANGES[t];throw new o.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new o.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},t.template=function(e,t){if(!t)throw new o.default("No environment passed to template");if(!e||!e.main)throw new o.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n=e.compiler&&7===e.compiler[0];var i={strict:function(e,t,n){if(!e||!(t in e))throw new o.default('"'+t+'" not defined in '+e,{loc:n});return e[t]},lookupProperty:function(e,t){var n=e[t];return null==n||Object.prototype.hasOwnProperty.call(e,t)||u.resultIsAllowed(n,i.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,r=0;r<n;r++){if(null!=(e[r]&&i.lookupProperty(e[r],t)))return e[r][t]}},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:r.escapeExpression,invokePartial:function(n,i,s){s.hash&&(i=r.extend({},i,s.hash),s.ids&&(s.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,i,s);var a=r.extend({},s,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),l=t.VM.invokePartial.call(this,n,i,a);if(null==l&&t.compile&&(s.partials[s.name]=t.compile(n,e.compilerOptions,t),l=s.partials[s.name](i,a)),null!=l){if(s.indent){for(var c=l.split("\n"),u=0,d=c.length;u<d&&(c[u]||u+1!==d);u++)c[u]=s.indent+c[u];l=c.join("\n")}return l}throw new o.default("The partial "+s.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,i,r){var s=this.programs[e],o=this.fn(e);return t||r||i||n?s=d(this,e,o,t,n,i,r):s||(s=this.programs[e]=d(this,e,o)),s},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=r.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function s(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=n.data;s._setup(n),!n.partial&&e.useData&&(r=p(t,r));var o=void 0,a=e.useBlockParams?[]:void 0;function l(t){return""+e.main(i,t,i.helpers,i.partials,r,a,o)}return e.useDepths&&(o=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(l=f(e.main,l,i,n.depths||[],r,a))(t,n)}return s.isTop=!0,s._setup=function(s){if(s.partial)i.protoAccessControl=s.protoAccessControl,i.helpers=s.helpers,i.partials=s.partials,i.decorators=s.decorators,i.hooks=s.hooks;else{var o=r.extend({},t.helpers,s.helpers);!function(e,t){Object.keys(e).forEach((function(n){var i=e[n];e[n]=function(e,t){var n=t.lookupProperty;return c.wrapHelper(e,(function(e){return r.extend({lookupProperty:n},e)}))}(i,t)}))}(o,i),i.helpers=o,e.usePartial&&(i.partials=i.mergeIfNeeded(s.partials,t.partials)),(e.usePartial||e.useDecorators)&&(i.decorators=r.extend({},t.decorators,s.decorators)),i.hooks={},i.protoAccessControl=u.createProtoAccessControl(s);var a=s.allowCallsToHelperMissing||n;l.moveHelperToHooks(i,"helperMissing",a),l.moveHelperToHooks(i,"blockHelperMissing",a)}},s._child=function(t,n,r,s){if(e.useBlockParams&&!r)throw new o.default("must pass block params");if(e.useDepths&&!s)throw new o.default("must pass parent depths");return d(i,t,e[t],n,0,r,s)},s},t.wrapProgram=d,t.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},t.invokePartial=function(e,t,n){var i=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var s=void 0;n.fn&&n.fn!==h&&function(){n.data=a.createFrame(n.data);var e=n.fn;s=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=a.createFrame(n.data),n.data["partial-block"]=i,e(t,n)},e.partials&&(n.partials=r.extend({},n.partials,e.partials))}();void 0===e&&s&&(e=s);if(void 0===e)throw new o.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=h;var i,r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),s=n(1),o=(i=s)&&i.__esModule?i:{default:i},a=n(4),l=n(5),c=n(28),u=n(8);function d(e,t,n,i,r,s,o){function a(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=o;return!o||t==o[0]||t===e.nullContext&&null===o[0]||(a=[t].concat(o)),n(e,t,e.helpers,e.partials,r.data||i,s&&[r.blockParams].concat(s),a)}return(a=f(n,a,e,o,i,s)).program=t,a.depth=o?o.length:0,a.blockParams=r||0,a}function h(){return""}function p(e,t){return t&&"root"in t||((t=t?a.createFrame(t):{}).root=e),t}function f(e,t,n,i,s,o){if(e.decorator){var a={};t=e.decorator(t,a,n,i&&i[0],s,o,i),r.extend(t,a)}return t}},function(e,t,n){"use strict";t.__esModule=!0,t.wrapHelper=function(e,t){if("function"!=typeof e)return e;return function(){var n=arguments[arguments.length-1];return arguments[arguments.length-1]=t(n),e.apply(this,arguments)}}},function(e,t,n){"use strict";(function(n){t.__esModule=!0,t.default=function(e){var t=void 0!==n?n:window,i=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=i),e}},e.exports=t.default}).call(this,n(6))},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var s,o=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<canvas id="js-main-scene" class="main-scene" width="'+l("function"==typeof(s=null!=(s=c(n,"width")||(null!=t?c(t,"width"):t))?s:a)?s.call(o,{name:"width",hash:{},data:r,loc:{start:{line:1,column:53},end:{line:1,column:62}}}):s)+'" height="'+l("function"==typeof(s=null!=(s=c(n,"height")||(null!=t?c(t,"height"):t))?s:a)?s.call(o,{name:"height",hash:{},data:r,loc:{start:{line:1,column:72},end:{line:1,column:82}}}):s)+'"></canvas>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){return'<form id="js-score-popup" class="popup score-popup hidden">\n    <input id="js-name" type="text" />\n    <button type="submit" id="js-score-ok">Ok</button>\n</form>'},useData:!0})},function(e,t,n){"use strict";n.r(t);n(10);const i=(e,t,n)=>e<t?t:e>n?n:e,r=(e,t)=>Math.floor(Math.random()*(t-e+1)+e);function s(e){return void 0!==e.radius}class o{constructor({shape:e,color:t}){this.shape=e,this.color=t}}class a{constructor(e,t){this.x=e,this.y=t}clamp(e,t){return new a(i(this.x,e.x,t.x),i(this.y,e.y,t.y))}times(e){return new a(this.x*e,this.y*e)}add(e){return new a(this.x+e.x,this.y+e.y)}addDerivate(e,t){return this.add(t.times(e))}setX(e){return new a(e,this.y)}setY(e){return new a(this.x,e)}distanceFromX(e){return Math.abs(this.x-e.x)}distanceFromY(e){return Math.abs(this.y-e.y)}squaredDistanceFrom(e){let t=this.distanceFromX(e),n=this.distanceFromY(e);return t*t+n*n}toString(){return`(${this.x},${this.y})`}}class l{constructor(e,t){this.origin=e,this.size=t}get center(){return this.origin.add(this.size.times(.5))}toString(){return`${this.origin.toString()}[${this.size.x}x${this.size.y}]`}collidesWithRectangle(e){return this.origin.x<e.origin.x+e.size.x&&this.origin.x+this.size.x>e.origin.x&&this.origin.y<e.origin.y+e.size.y&&this.origin.y+this.size.y>e.origin.y}collidesWith(e){return s(e)?this.collidesWithCircle(e):this.collidesWithRectangle(e)}collidesWithCircle(e){const t=e;let n=this.center,i=t.center.distanceFromX(n),r=t.center.distanceFromY(n);if(i>this.size.x/2+t.radius)return!1;if(r>this.size.y/2+t.radius)return!1;if(i<=this.size.x/2)return!0;if(r<=this.size.y/2)return!0;var s=i-this.size.x/2,o=r-this.size.y/2;return s*s+o*o<=t.radius*t.radius}}class c{constructor(e,t){this.center=e,this.radius=t}}function u(e){return void 0!==e.startEnergy}function d(e){return void 0!==e.breakingSpeed}const h=(e,t,n)=>{let i=e.speed.x<0,r=e.speed.x>0,s=e.acc;d(e)&&e.isBreaking&&(s=i?s.setX(e.breakingSpeed):r?s.setX(-e.breakingSpeed):s.setX(0));let o=e.pos.addDerivate(t,e.speed),a=e.speed.addDerivate(t,s);if(d(e)&&(i&&a.x>=0||r&&a.x<=0)&&(e.isBreaking=!1,a=a.setX(0)),u(e)){let t=(l=e.startEnergy,c=a.y,(l-c*c*.5)/p.Gravity*-1);o=o.setY(t)}var l,c;if(e.useExternalBoundaries){let t={min:n.min.add(e.boundaries.min.times(-1)),max:n.max.add(e.boundaries.max.times(-1))},i=o.clamp(t.min,t.max);i.x!=o.x&&(a=e.shouldBounce?a.setX(-a.x):a.setX(0)),i.y!=o.y&&(a=u(e)?a.setY(function(e,t){return Math.sqrt(2*(e+t*p.Gravity))}(e.startEnergy,i.y)):e.shouldBounce?a.setY(-a.y):a.setY(0)),o=i}return e.update(Object.assign(Object.assign({},e),{pos:o,speed:a}))},p={Gravity:-8e-4};class f{constructor({pos:e,speed:t,acc:n,startEnergy:i,radius:r}){this.boundaries={min:new a(0,0),max:new a(0,0)},this.useExternalBoundaries=!0,this.shouldBounce=!0,this.pos=e,this.speed=t,this.acc=n,this.radius=r,i||(this.startEnergy=((e,t)=>t*t*.5-e*p.Gravity)(this.pos.y,this.speed.y)),this.isRed=!1}get shapes(){return[new o({shape:new c(this.pos,this.radius),color:"white"})]}update(e){let t=new f(Object.assign(Object.assign({},e),{startEnergy:this.startEnergy,radius:this.radius}));return t.startEnergy=this.startEnergy,t.isRed=this.isRed,t}get collisionBall(){return new c(this.pos,this.radius)}}class m{constructor(e,t,n){this.startY=n,this.shouldBounce=!1,this.speed=new a(0,1),this.acc=new a(0,0),this.useExternalBoundaries=!1,this.size=new a(10,0),this.pos=new a(e,n),this.size.y=t-n}update(e){return this.pos=e.pos,this}get boundaries(){return{min:new a(-this.size.x/2,Math.max(this.pos.y-this.size.y,this.startY)),max:new a(this.size.x/2,this.pos.y)}}shouldKeep(e){return this.pos.y-this.size.y<=e.max.y}get mainRectangle(){return new l(new a(this.pos.x-this.size.x/2,Math.max(this.pos.y-this.size.y,this.startY)),new a(this.size.x,this.pos.y-this.startY))}get shapes(){return[new o({shape:this.mainRectangle,color:"white"})]}}var g=n(9),v=n.n(g),w=n(3),y=n.n(w);class x{constructor({converter:e,context:t}){this.converter=e,this.context=t}drawShape(e){Array.prototype.forEach.call(e.shapes,e=>{if(this.context.beginPath(),s(e.shape)){let t=this.converter.coordinateToView(e.shape.center);this.context.arc(t.x,t.y,e.shape.radius,0,2*Math.PI),this.context.fillStyle=e.color}else{let t=this.converter.coordinateToView(e.shape.origin);this.context.rect(t.x,t.y,e.shape.size.x,-e.shape.size.y),this.context.fillStyle=e.color}this.context.fill()})}}const b={saveName(e){localStorage.setItem("default-name",e)},loadName:()=>localStorage.getItem("default-name")||""},k=()=>{const e=localStorage.getItem("scores");return e?JSON.parse(e):[]},P={clearScores(){localStorage.removeItem("scores")},loadScores:k,addScore(e){const t=k();t.push(e),t.sort((e,t)=>e.value!==t.value?t.value-e.value:e.timestamp-t.timestamp);const n=t.slice(0,10);return localStorage.setItem("scores",JSON.stringify(n)),n}};let _=v()({mainScene:{width:800,height:600},sidebar:{scores:P.loadScores()}}),S=!0,M=document.createElement("div");M.innerHTML=_;let j,E=M.children[0];document.body.appendChild(E);let O=document.getElementById("js-timer");const D=document.getElementById("js-shoot-delay"),C=document.getElementById("js-super-indicators"),I=document.getElementById("js-score-popup"),L=document.getElementById("js-start-popup"),T=document.getElementById("js-pause-popup"),R=[];let H=document.getElementById("js-main-scene"),z=document.getElementById("js-sidebar-wrapper"),A=e=>({min:new a(0,0),max:new a(e.width,e.height)}),B=A(H),F=new class{constructor(e,t,n){this.interval=e,this.boundariesGenerator=t,this.radius=n,this.balls=[],this.remainder=0,this.isFirst=!0,this.init()}init(){this.balls=[],this.isFirst=!0,this.remainder=.5*this.interval}throwBall(){let e=this.boundariesGenerator(),t=new f({pos:new a(r(e.min.x,e.max.x),r(.7*(e.max.y+e.min.y),e.max.y-20)),speed:new a(r(20,70)*(2*r(0,1)-1)*.01,0),acc:new a(0,p.Gravity),radius:this.radius});t.isRed=this.isFirst,this.isFirst=!1,this.balls.push(t)}checkCollisions(e){const t=[],n=this.balls.filter(n=>{const i=e.collidingShots(n.collisionBall);return i.forEach(e=>t.push(e)),0===i.length});e.removeShots(t),this.balls=n,e.stillPoweredFor?this.balls=this.balls.filter(t=>!e.collidesWith(t.collisionBall)):e.isColliding=this.balls.some(t=>e.collidesWith(t.collisionBall))}handleTimePassage(e){for(this.remainder+=e;this.remainder>=this.interval;)this.throwBall(),this.remainder-=this.interval}}(4e3,()=>A(H),8),N=new a(80,80),U=new class{constructor(e,t){this.pos=e,this.size=t,this.onColliding=null,this._isColliding=!1,this.shots=[],this.howManyPowers=3,this.waitToShoot=0,this.breakingSpeed=.004,this.isBreaking=!1,this.maxSpeed=2,this.movementAcc=.002,this.shootDelay=4500,this.useExternalBoundaries=!0,this.boundaries={min:new a(-this.size.x/2,0),max:new a(this.size.x/2,this.size.y)},this.shouldBounce=!1,this.speed=new a(0,0),this.acc=new a(0,0)}init(){this.isColliding=!1,this.shots=[],this.howManyPowers=3,this.waitToShoot=0,this.stillPoweredFor=void 0,this.isBreaking=!1,this.acc=new a(0,0),this.speed=new a(0,0)}get isColliding(){return this._isColliding}set isColliding(e){const t=this._isColliding;this._isColliding=e,null!==this.onColliding&&!t&&e&&this.onColliding()}get shapes(){if(this.stillPoweredFor&&this.stillPoweredFor>0){let e=new l(new a(this.pos.x-this.size.x/2,0),new a(this.size.x,this.size.y));return[new o({shape:e,color:"yellow"})]}{let e=this.isColliding?"red":"white";return[new o({shape:new l(new a(this.pos.x-this.size.x/4,this.pos.y+.25*this.size.x),new a(this.size.x/2,this.size.y-.5*this.size.x)),color:e}),new o({shape:new c(new a(this.pos.x,this.pos.y+2*this.size.y/3),.25*this.size.x),color:e}),new o({shape:new c(new a(this.pos.x,this.pos.y+.25*this.size.x),.25*this.size.x),color:e})]}}passTime(e){this.stillPoweredFor&&(this.stillPoweredFor-=e,this.stillPoweredFor<0&&(this.stillPoweredFor=void 0)),this.waitToShoot=Math.max(0,this.waitToShoot-e)}activatePower(){!this.stillPoweredFor&&this.howManyPowers>0&&(this.howManyPowers--,this.stillPoweredFor=4e3,this.indicatorRemover&&this.indicatorRemover())}get indicatorRatio(){return(this.waitToShoot||0)/this.shootDelay}get movingRight(){return this.speed.x>0}get movingLeft(){return this.speed.x<0}shoot(){0===this.waitToShoot&&this.areaHeight&&(this.shots.push(new m(this.pos.x,this.areaHeight(),.75*this.size.x)),this.waitToShoot=this.shootDelay)}moveRight(){this.isBreaking=!1,this.movingLeft&&(this.speed=this.speed.setX(0)),this.acc=new a(this.movementAcc,0)}moveLeft(){this.isBreaking=!1,this.movingRight&&(this.speed=this.speed.setX(0)),this.acc=new a(-this.movementAcc,0)}stopMoving(){this.isBreaking=!0}update(e){return this.pos=e.pos,this.acc=e.acc,this.speed=e.speed.clamp(new a(-this.maxSpeed,0),new a(this.maxSpeed,0)),this}get collisionRectangle(){let e=this.size.x/2;return this.stillPoweredFor||(e/=2),new l(new a(this.pos.x-e,0),new a(2*e,this.size.y))}collidingShots(e){return this.shots.filter(t=>t.mainRectangle.collidesWith(e))}removeShots(e){this.shots=this.shots.filter(t=>!e.includes(t))}collidesWith(e){let t=this.collisionRectangle,n=t.center,i=e.center.distanceFromX(n),r=e.center.distanceFromY(n);if(i>t.size.x/2+e.radius)return!1;if(r>t.size.y/2+e.radius)return!1;if(i<=t.size.x/2)return!0;if(r<=t.size.y/2)return!0;var s=i-t.size.x/2,o=r-t.size.y/2;return s*s+o*o<=e.radius*e.radius}}(new a(.5*(B.min.x+B.max.x),0),N);U.indicatorRemover=()=>{if(R.length>0){const[e]=R.splice(0,1);C.removeChild(e)}},U.areaHeight=()=>{const e=A(H);return e.max.y-e.min.y};let V=new class{constructor(e){this.canvas=e}coordinateToView(e){return e.setY(this.canvas.height-e.y)}coordinateToWorld(e){return e.setY(e.y-this.canvas.height)}sizeToView(e){return e}sizeToWorld(e){return e}}(H),Y=null;const G=()=>{const e=document.getElementById("js-score-clear");e&&(e.onclick=()=>{P.clearScores(),X()})};G();const X=()=>{const e=y()({scores:P.loadScores()});z.innerHTML=e,G()},W=()=>{S=!1,Y=null,j=(new Date).getTime(),U.init(),F.init(),C.innerHTML="",R.length=0;for(let e=0;e<3;e++){const e=document.createElement("div");e.classList.add("super-indicator"),R.push(e),C.appendChild(e)}X()};let q=null,$=new class{constructor(e,t,n){this.shooterExtractor=e,this.init=t,this.pauseShow=n,this.isPaused=!1,this.slowDown=!1,this.ignoreInput=!1,this.keysDown=new Set,this.isLeftDown=!1,this.isRightDown=!1,this.isDownDown=!1,this.isUpDown=!1;let i={80:"p",83:"s",78:"n"},r=e=>t=>{this.ignoreInput||(37===t.keyCode?this.isLeftDown=e:38===t.keyCode?this.isUpDown=e:39===t.keyCode?this.isRightDown=e:40===t.keyCode?this.isDownDown=e:i[t.keyCode]&&e&&this.keysDown.add(i[t.keyCode]))};window.onkeydown=r(!0),window.onkeyup=r(!1)}restore(){this.ignoreInput=!1}pause(){this.ignoreInput=!0,this.isRightDown=!1,this.isLeftDown=!1,this.isDownDown=!1,this.isUpDown=!1,this.keysDown.clear()}documentHidden(){this.isLeftDown=!1,this.isRightDown=!1}handleInput(){if(this.ignoreInput)return;let e=this.shooterExtractor();this.isLeftDown&&this.isRightDown||!this.isLeftDown&&!this.isRightDown?e.stopMoving():this.isLeftDown?e.moveLeft():this.isRightDown&&e.moveRight(),this.isDownDown&&e.activatePower(),this.isUpDown&&e.shoot(),this.keysDown.has("p")&&(this.isPaused=!this.isPaused,this.pauseShow(this.isPaused)),this.keysDown.has("s")&&(this.slowDown=!this.slowDown),this.keysDown.has("n")&&this.init(),this.keysDown=new Set}}(()=>U,W,e=>{e?(q=(new Date).getTime(),T.classList.remove("hidden")):(T.classList.add("hidden"),null!==q&&null!==j&&(j=(new Date).getTime()-(q-j),q=null))});let J=[e=>F.handleTimePassage(e),()=>F.checkCollisions(U),e=>{let t=A(H);F.balls=F.balls.map(n=>h(n,e,t))},e=>{let t=A(H);U=h(U,e,t),U.passTime(e)},e=>{let t=A(H);U.shots.forEach(n=>h(n,e,t)),U.shots=U.shots.filter(e=>e.shouldKeep(t))}],K=[e=>e.drawShape(U),e=>F.balls.forEach(t=>{e.drawShape(t)}),e=>U.shots.forEach(t=>e.drawShape(t)),()=>{const e=100*U.indicatorRatio+"px";D.style.width=e},()=>{if(!S){const e=Math.floor(((new Date).getTime()-j)/1e3);Y=e,O.innerText=""+e}}],Z=new class{constructor(e,t){this.canvas=e,this.drawerFactory=t,this.modelUpdates=[],this.graphicUpdates=[],this.pauseUpdates=!1,this.timeoutHandlers=null,this.lastTicks=void 0}restore(){this.pauseUpdates=!1,this.lastTicks=void 0}pause(){null!==this.timeoutHandlers&&window.clearTimeout(this.timeoutHandlers.id),this.pauseUpdates=!0}update(){let e=this.canvas.getContext("2d"),t=()=>{if(!this.pauseUpdates){let t=(new Date).getTime();if(this.lastTicks||(this.lastTicks=t),this.inputHandler&&this.inputHandler.handleInput(),!this.inputHandler||!this.inputHandler.isPaused){((e,t)=>{e.clearRect(0,0,t.width,t.height)})(e,this.canvas);let n=t-this.lastTicks;this.inputHandler&&this.inputHandler.slowDown&&(n*=.5),this.modelUpdates=this.modelUpdates.filter(e=>!e(n)),this.graphicUpdates=this.graphicUpdates.filter(t=>!t(this.drawerFactory(e)))}this.lastTicks=t}const n=window.setTimeout(t,16);this.timeoutHandlers={id:n,callback:t.bind(this)}};t()}}(H,e=>new x({converter:V,context:e}));Z.graphicUpdates=K,Z.modelUpdates=J,Z.inputHandler=$,U.onColliding=()=>{S=!0,Z.pause(),$.pause(),(e=>{const t=document.getElementById("js-name");t.value=b.loadName(),I.classList.remove("hidden"),t.focus();const n=i=>{i.preventDefault();const r=t.value||"";b.saveName(r),e(r),I.removeEventListener("submit",n),I.classList.add("hidden")};I.addEventListener("submit",n)})(e=>{null!==Y&&P.addScore({name:e,timestamp:Date.now(),value:Y}),W(),$.restore(),Z.restore()})};const Q=document.getElementById("js-start-button");Q&&Q.focus(),L.addEventListener("submit",e=>{e.preventDefault(),L.classList.add("hidden"),W(),Z.update()})}]);